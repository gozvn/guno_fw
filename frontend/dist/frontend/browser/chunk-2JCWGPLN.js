import{a as Ae}from"./chunk-ASVI2MGW.js";import{j as Se,k as be,l as Ce,m as xe,n as _e,r as ye,s as J,t as K}from"./chunk-L6F77YVF.js";import{$ as U,C as B,H as T,I as h,J as M,K as F,L as R,M as x,O as q,Q as D,R as G,T as pe,U as ue,W as O,Y as H,aa as V,c as de,gb as ve,ib as z,jb as W,kb as ge,l as E,lb as he,n as j,o as P,q as ne,qa as fe}from"./chunk-72SSQTOY.js";import{Ab as L,Ac as A,Bc as te,Fb as v,Hc as l,Ic as m,Ja as k,Jc as ie,Kb as g,Qb as p,Ub as n,Vb as o,Wb as f,bc as _,dc as C,f as re,ha as me,hb as ce,ia as I,ma as ee,mb as t,nb as u,qc as r,rc as d,sa as w,sc as S,ta as N,u as le,xd as se}from"./chunk-7KMJWKAM.js";import"./chunk-WWX6BADO.js";var Q=class{constructor(c,i,s,a,b,oe,ae,ke){this.id=c;this.email=i;this.firstName=s;this.lastName=a;this.name=b;this.photoUrl=oe;this.provider=ae;this.authToken=ke}};var y=class e{constructor(c,i){this.http=c;this.backendService=i}apiServerPaths=he.backendServer.paths;dataBigIdea=new re;login(c){let i=this.apiServerPaths.auth.social.login,s=c;return s.encryptBody=!0,this.backendService.post(i,s,le(a=>a?.data?.user??!0))}static \u0275fac=function(i){return new(i||e)(ee(de),ee(ye))};static \u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})};var Re=()=>["/"],qe=()=>["/","auth","login"];function De(e,c){e&1&&(n(0,"div",31),r(1,"Name is required."),o())}function Ge(e,c){e&1&&(n(0,"div",31),r(1,"Name should be 6 character."),o())}function Oe(e,c){if(e&1&&(n(0,"mat-hint",24),v(1,De,2,0,"div",31)(2,Ge,2,0,"div",31),o()),e&2){let i=C();t(),p(i.f.uname.errors&&i.f.uname.errors.required?1:-1),t(),p(i.f.uname.errors&&i.f.uname.errors.minlength?2:-1)}}function He(e,c){e&1&&(n(0,"div",31),r(1,"Password is required."),o())}function Ue(e,c){if(e&1&&(n(0,"mat-hint",24),v(1,He,2,0,"div",31),o()),e&2){let i=C();t(),p(i.f.password.errors&&i.f.password.errors.required?1:-1)}}var Y=class e extends K{constructor(i,s,a,b,oe,ae,ke){super(i,s,a,b);this.activeRoute=i;this.translateService=s;this.authenticationService=a;this.injector=b;this.router=oe;this.socialAuthService=ae;this.appAuthSocialService=ke;this.form=new R({uname:new x("",[h.required,h.minLength(6)]),password:new x("",[h.required])}),this.user&&this.router.navigate(["/"])}loading=!1;form;ngOnInit(){super.ngOnInit(),this.subscription=this.socialAuthService.authState.subscribe(i=>{this.user=i,this.user&&this.socialLogin()})}loginWithFacebook(){this.socialAuthService.signIn(Ce.PROVIDER_ID).then(i=>{this.user=i}).catch(i=>{console.error("Login failed!",i)})}socialLogin(){this.loading=!0;let i=new Q(this.user.id,this.user.email,this.user.firstName,this.user.lastName,this.user.name,this.user.photoUrl,this.user.provider,this.user.authToken??this.user.idToken);this.appAuthSocialService.login(i).subscribe(s=>{if(s&&s.accessToken){let a=this.authenticationService.formatUser(s);this.authenticationService.setUserInLocalStorage(a),this.router.navigate(["/"])}else this.router.navigate(["auth","error"])})}get f(){return this.form.controls}submit(){console.log(this.form.value)}static \u0275fac=function(s){return new(s||e)(u(E),u(z),u(J),u(k),u(j),u(Se),u(y))};static \u0275cmp=w({type:e,selectors:[["app-auth-page-side-login"]],features:[L],decls:55,vars:40,consts:[[1,"blank-layout-container","justify-content-center"],[1,"position-relative","row","w-100","h-100"],[1,"col-lg-4"],[1,"d-flex","align-items-start","align-items-lg-center","justify-content-center","h-100"],[1,"row","justify-content-center","w-100","h-100","align-items-center"],[1,"col-lg-9","max-width-form"],[3,"routerLink"],["src","./assets/styles/default/images/logo.png","height","40","alt","logo",1,"align-middle","m-2"],[1,"f-w-700","f-s-24","m-t-24","m-b-8"],[1,"f-s-14","d-block","mat-body-1","m-t-8"],[1,"row","m-t-24"],[1,"col-6","position-relative"],["type","standard","size","large",2,"opacity","0"],["mat-stroked-button","",1,"w-100","d-flex","align-items-center",3,"disabled"],[1,"d-flex","align-items-center"],["src","/assets/styles/default/images/svgs/google-icon.svg","alt","google","width","16",1,"m-r-4"],[1,"col-6"],["mat-stroked-button","",1,"w-100","d-flex","align-items-center",3,"click","disabled"],["src","/assets/styles/default/images/svgs/facebook-icon.svg","alt","facebook","width","40",1,"m-r-4"],[1,"or-border","m-t-30"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","uname"],[1,"m-b-16","error-msg"],["matInput","","type","password","formControlName","password"],[1,"d-flex","align-items-center","m-b-12"],["color","primary"],[1,"text-primary","f-w-600","text-decoration-none","m-l-auto","f-s-14",3,"routerLink"],["mat-flat-button","","color","primary",1,"w-100",3,"disabled"],[1,"col-lg-8","position-relative","overflow-hidden","bg-dark-200","d-none","d-lg-block","bg-auth-login"],[1,"text-error"]],template:function(s,a){s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6),f(7,"img",7),o(),n(8,"h4",8),r(9),l(10,"translate"),o(),n(11,"span",9),r(12),l(13,"translate"),o(),n(14,"div",10)(15,"div",11),f(16,"asl-google-signin-button",12),n(17,"button",13)(18,"div",14),f(19,"img",15),r(20),l(21,"translate"),o()()(),n(22,"div",16)(23,"button",17),_("click",function(){return a.loginWithFacebook()}),n(24,"div",14),f(25,"img",18),r(26),l(27,"translate"),o()()()(),n(28,"div",19),r(29),l(30,"translate"),o(),n(31,"form",20),_("ngSubmit",function(){return a.submit()}),n(32,"mat-label",21),r(33),l(34,"translate"),o(),n(35,"mat-form-field",22),f(36,"input",23),v(37,Oe,3,2,"mat-hint",24),o(),n(38,"mat-label",21),r(39),l(40,"translate"),o(),n(41,"mat-form-field",22),f(42,"input",25),v(43,Ue,2,1,"mat-hint",24),o(),n(44,"div",26)(45,"mat-checkbox",27),r(46),l(47,"translate"),o(),n(48,"a",28),r(49),l(50,"translate"),o()(),n(51,"button",29),r(52),l(53,"translate"),o()()()()()(),f(54,"div",30),o()()),s&2&&(t(6),g("routerLink",A(38,Re)),t(3),d(m(10,18,"auth.login.title")),t(3),d(m(13,20,"dashboard.name")),t(5),g("disabled",a.loading),t(3),S(" ",m(21,22,"auth.login.google")," "),t(3),g("disabled",!0),t(3),S(" ",m(27,24,"auth.login.facebook")," "),t(3),d(m(30,26,"auth.login.orLoginWith")),t(2),g("formGroup",a.form),t(2),d(m(34,28,"auth.login.email")),t(4),p(a.f.uname.touched&&a.f.uname.invalid?37:-1),t(2),d(m(40,30,"auth.login.password")),t(4),p(a.f.password.touched&&a.f.password.invalid?43:-1),t(3),d(m(47,32,"auth.login.rememberLogin")),t(2),g("routerLink",A(39,qe)),t(),d(m(50,34,"auth.login.forgotPassword")),t(2),g("disabled",a.loading||!a.form.valid),t(),d(m(53,36,"buttons.signIn")))},dependencies:[q,T,M,F,D,G,P,B,V,U,O,H,fe,xe,W],styles:[".bg-auth-login[_ngcontent-%COMP%]{background-image:url(/assets/styles/default/images/backgrounds/auth-login.png);background-size:cover}asl-google-signin-button[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;z-index:100}"]})};var Ve=()=>["/"],we=e=>({fullName:e});function ze(e,c){e&1&&(n(0,"div",35),r(1),l(2,"translate"),o()),e&2&&(t(),d(m(2,1,"auth.activate.minLength")))}function We(e,c){e&1&&(n(0,"div",35),r(1),l(2,"translate"),o()),e&2&&(t(),S(" ",m(2,1,"auth.activate.minLength")," "))}function Je(e,c){if(e&1&&(n(0,"mat-hint",19),v(1,ze,3,3,"div",35)(2,We,3,3,"div",35),o()),e&2){let i=C();t(),p(i.f.teacherName.errors&&i.f.teacherName.errors.required?1:-1),t(),p(i.f.teacherName.errors&&i.f.teacherName.errors.minlength?2:-1)}}function Ke(e,c){e&1&&(n(0,"div",35),r(1),l(2,"translate"),o()),e&2&&(t(),d(m(2,1,"auth.activate.minLength")))}function Qe(e,c){e&1&&(n(0,"div",35),r(1),l(2,"translate"),o()),e&2&&(t(),S(" ",m(2,1,"auth.activate.minLength")," "))}function Xe(e,c){if(e&1&&(n(0,"mat-hint",19),v(1,Ke,3,3,"div",35)(2,Qe,3,3,"div",35),o()),e&2){let i=C();t(),p(i.f.yourName.errors&&i.f.yourName.errors.required?1:-1),t(),p(i.f.yourName.errors&&i.f.yourName.errors.minlength?2:-1)}}function Ye(e,c){e&1&&(n(0,"div",35),r(1),l(2,"translate"),o()),e&2&&(t(),d(m(2,1,"auth.activate.minLength")))}function Ze(e,c){e&1&&(n(0,"div",35),r(1),l(2,"translate"),o()),e&2&&(t(),S(" ",m(2,1,"auth.activate.minLength")," "))}function $e(e,c){if(e&1&&(n(0,"mat-hint",19),v(1,Ye,3,3,"div",35)(2,Ze,3,3,"div",35),o()),e&2){let i=C();t(),p(i.f.yourChildrenName.errors&&i.f.yourChildrenName.errors.required?1:-1),t(),p(i.f.yourChildrenName.errors&&i.f.yourChildrenName.errors.minlength?2:-1)}}var Z=class e extends K{constructor(i,s,a,b,oe,ae){super(i,s,a,b);this.activeRoute=i;this.translateService=s;this.authenticationService=a;this.injector=b;this.router=oe;this.appAuthSocialService=ae;this.form=new R({teacherName:new x("",[h.required,h.minLength(6)]),yourName:new x("",[h.required,h.minLength(6)]),yourChildrenName:new x("",[h.required,h.minLength(6)])}),this.user=this.authenticationService.getUserFromLocalStorage()}form;ngOnInit(){super.ngOnInit(),this.user&&this.user.isLivestream()&&this.router.navigate(["/"])}get f(){return this.form.controls}submit(){console.log(this.form.value);let i=this.form.value}logout(){this.authenticationService.logout(),this.router.navigate(["/","auth","login"])}static \u0275fac=function(s){return new(s||e)(u(E),u(z),u(J),u(k),u(j),u(y))};static \u0275cmp=w({type:e,selectors:[["app-auth-page-activate"]],features:[L],decls:62,vars:40,consts:[[1,"blank-layout-container","justify-content-center","align-items-center"],[1,"position-relative","overflow-hidden","auth-bg","min-vh-100","h-100","w-100","d-flex","align-items-center","justify-content-center"],[1,"d-flex","align-items-center","justify-content-center","w-100"],[1,"row","justify-content-center","w-100","my-5","my-xl-0"],[1,"col-sm-9","d-flex","flex-column","justify-content-center"],[1,"bg-white","mb-0","rounded","auth-login","m-auto","w-100","overflow-hidden"],[1,"row","gx-0"],[1,"col-lg-6","b-r-1","p-r-0"],[1,"row","justify-content-center","p-y-24"],[1,"col-lg-11"],[1,"p-30"],[3,"routerLink"],["src","./assets/styles/default/images/logo.svg","alt","logo",1,"align-middle","m-2"],[1,"f-w-700","f-s-34","m-t-24","m-b-8"],[1,"d-block","f-w-500","m-t-24",3,"innerHTML"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","teacherName"],[1,"m-b-16","error-msg"],["matInput","","formControlName","yourName"],["matInput","","formControlName","yourChildrenName"],[1,"row"],[1,"col-6"],["mat-flat-button","","color","primary",1,"w-100",3,"disabled"],["mat-flat-button","","color","primary",1,"w-100",3,"click"],[1,"d-block","f-w-500","m-t-24","text-warning"],[1,"col-lg-6","d-none","d-lg-block"],[1,"row","justify-content-center","align-items-center","h-100"],[1,"col-lg-9"],[1,"d-flex","align-items-center","justify-content-center","w-100","h-100","flex-column","gap-9","text-center"],["src","/assets/styles/default/images/backgrounds/login-side.png","alt","login-side-img","width","300",1,"img-fluid"],[1,"mb-0","f-s-22","m-y-20"],[1,"f-s-15","m-b-20","m-t-0","mat-body-1"],["mat-flat-button","","color","primary"],[1,"text-error"]],template:function(s,a){s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"a",11),f(12,"img",12),o(),n(13,"h4",13),r(14),l(15,"translate"),o(),n(16,"span",14),l(17,"translate"),r(18),l(19,"translate"),o(),n(20,"form",15),_("ngSubmit",function(){return a.submit()}),n(21,"mat-label",16),r(22),l(23,"translate"),o(),n(24,"mat-form-field",17),f(25,"input",18),v(26,Je,3,2,"mat-hint",19),o(),n(27,"mat-label",16),r(28),l(29,"translate"),o(),n(30,"mat-form-field",17),f(31,"input",20),v(32,Xe,3,2,"mat-hint",19),o(),n(33,"mat-label",16),r(34),l(35,"translate"),o(),n(36,"mat-form-field",17),f(37,"input",21),v(38,$e,3,2,"mat-hint",19),o(),n(39,"div",22)(40,"div",23)(41,"button",24),r(42),l(43,"translate"),o()(),n(44,"div",23)(45,"button",25),_("click",function(){return a.logout()}),r(46),l(47,"translate"),o()()()(),n(48,"span",26),r(49),l(50,"translate"),o()()()()(),n(51,"div",27)(52,"div",28)(53,"div",29)(54,"div",30),f(55,"img",31),n(56,"h4",32),r(57,"Feature Rich 3D Charts"),o(),n(58,"p",33),r(59," Donec justo tortor, malesuada vitae faucibus ac, tristique sit amet massa. Aliquam dignissim nec felis quis imperdiet. "),o(),n(60,"button",34),r(61," Learn More "),o()()()()()()()()()()()()),s&2&&(t(11),g("routerLink",A(35,Ve)),t(3),d(m(15,15,"auth.activate.title")),t(2),g("innerHTML",ie(17,17,"auth.activate.hello",te(36,we,a.user.fullName)),ce),t(2),d(ie(19,20,"auth.activate.hello",te(38,we,a.user.fullName))),t(2),g("formGroup",a.form),t(2),d(m(23,23,"auth.activate.question1")),t(4),p(a.f.teacherName.touched&&a.f.teacherName.invalid?26:-1),t(2),d(m(29,25,"auth.activate.question2")),t(4),p(a.f.yourName.touched&&a.f.yourName.invalid?32:-1),t(2),d(m(35,27,"auth.activate.question3")),t(4),p(a.f.yourChildrenName.touched&&a.f.yourChildrenName.invalid?38:-1),t(3),g("disabled",!a.form.valid),t(),S(" ",m(43,29,"buttons.activate")," "),t(4),S(" ",m(47,31,"buttons.signOut")," "),t(3),d(m(50,33,"auth.activate.answerGuideline")))},dependencies:[q,T,M,F,D,G,P,B,V,U,O,H,W]})};var et=[{path:"login",component:Y,data:{title:"auth.login.title"}},{path:"activate",component:Z,data:{title:"auth.login.title"},canActivate:[Ae]}],$=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=N({type:e});static \u0275inj=I({imports:[ne.forChild(et),ne]})};var Ne=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=N({type:e});static \u0275inj=I({imports:[se,pe,ue,$,ve,ge,be,_e]})};export{Ne as AuthModule};
