import{a as Se}from"./chunk-JSUAOEMS.js";import{d as we}from"./chunk-YCX5PDJM.js";import{a as H}from"./chunk-EMKKK2TE.js";import{a as L}from"./chunk-VD7526WH.js";import{r as he,s as be,t as Ce}from"./chunk-L6F77YVF.js";import{$ as K,Aa as ce,B as Ke,Ba as me,C as G,Ca as de,Da as se,H as Qe,J as Xe,N as Ze,Na as et,Pa as V,Ra as pe,Sa as tt,Ta as _e,Ua as ue,Va as fe,W as U,Wa as ge,Xa as ve,Z as J,Za as it,_a as xe,aa as Q,ba as X,c as z,ca as Z,da as ee,fa as te,ha as B,ib as j,jb as W,l as Y,lb as ye,ua as ie,va as ae,wa as ne,xa as re,ya as oe,za as le}from"./chunk-72SSQTOY.js";import{Ab as q,Bc as Ee,Da as v,Ea as x,Fb as p,Hc as _,Ic as u,Ja as F,Jc as $e,Kb as m,Kc as Fe,Lb as P,Ma as Le,Ob as je,Ub as l,Vb as r,Wb as g,Xb as w,Yb as S,_b as C,bc as b,dc as d,f as N,gc as I,ha as $,ma as O,mb as n,nb as y,nd as qe,od as ze,pc as We,pd as M,qc as c,qd as Ye,rc as f,rd as Ge,sa as T,sc as h,tc as He,td as Ue,u as k,vc as Ae,wc as Re,wd as Je,xc as Ne}from"./chunk-7KMJWKAM.js";var A=class t{constructor(a,e){this.http=a;this.backendService=e}apiServerPaths=ye.backendServer.paths;dataBigIdea=new N;create(a){let e=this.apiServerPaths.gunoHub.warehouse.inventory.delivery.create,o=a;return o.encryptBody=!0,this.backendService.post(e,o,k(i=>i.data))}search(a){let e=this.apiServerPaths.gunoHub.warehouse.inventory.delivery.search,o={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(let i in a)switch(i){case"seller-sku":o.params.code=a[i];break;default:o.params[i]=a[i]}return this.backendService.get(e,o,k(i=>i.data))}getItemByNumber(a){let e=this.apiServerPaths.gunoHub.warehouse.inventory.delivery.detail.replace("{NUMBER}",a.toString()),o={params:{encryptParam:!0},headers:{Accept:"application/json"}};return this.backendService.get(e,o,k(i=>i.data))}getItemByOrderId(a){let e=this.apiServerPaths.gunoHub.warehouse.inventory.delivery.detailOrder.replace("{NUMBER}",a.toString()),o={params:{encryptParam:!0},headers:{Accept:"application/json"}};return this.backendService.get(e,o,k(i=>i.data))}static \u0275fac=function(e){return new(e||t)(O(z),O(he))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};var dt=t=>({"sticky-box-shadow-right":t});function Tt(t,a){t&1&&(l(0,"div",8),g(1,"mat-spinner",9),r()),t&2&&(n(),m("diameter",40))}function Et(t,a){if(t&1&&(w(0),c(1),_(2,"translate"),S()),t&2){let e=d().$implicit;n(),h(" ",u(2,1,"warehouse.inventory.delivery.type."+e)," ")}}function Ot(t,a){if(t&1&&(l(0,"mat-option",52),p(1,Et,3,3,"ng-container",53),r()),t&2){let e=a.$implicit;m("value",e),n(),m("ngIf",e!=="customize")}}function Mt(t,a){if(t&1&&(w(0),c(1),_(2,"translate"),S()),t&2){let e=d().$implicit;n(),h(" ",u(2,1,"warehouse.inventory.delivery.status."+e)," ")}}function Bt(t,a){if(t&1&&(l(0,"mat-option",52),p(1,Mt,3,3,"ng-container",53),r()),t&2){let e=a.$implicit;m("value",e),n(),m("ngIf",e!=="customize")}}function Vt(t,a){if(t&1&&(l(0,"th",54),c(1),_(2,"translate"),r()),t&2){let e=d(2);m("ngClass",Ee(4,dt,e.isTableScrolled)),n(),h(" ",u(2,2,"warehouse.inventory.common.sellerSku")," ")}}function Lt(t,a){if(t&1){let e=C();l(0,"i-tabler",62),b("click",function(){v(e);let i=d().$implicit,s=d(2);return x(s.copy(i.seller_sku))}),r()}}function jt(t,a){if(t&1&&(l(0,"span")(1,"span"),c(2),r(),c(3,": "),l(4,"span",63),c(5),r(),c(6,", "),r()),t&2){let e=a.$implicit;n(2),f(e.name),n(3),f(e.value)}}function Wt(t,a){if(t&1&&(l(0,"td",55)(1,"div",56)(2,"div")(3,"h5",57),c(4),p(5,Lt,1,0,"i-tabler",58),r(),l(6,"div",59),g(7,"i-tabler",60),p(8,jt,7,2,"span",61),r()()()()),t&2){let e,o=a.$implicit,i=d(2);m("ngClass",Ee(4,dt,i.isTableScrolled)),n(4),h("",(e=o==null?null:o.seller_sku)!==null&&e!==void 0?e:"N/A"," "),n(),m("ngIf",o.seller_sku),n(3),m("ngForOf",o.fields)}}function Ht(t,a){t&1&&(l(0,"th",64),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"warehouse.inventory.common.productCode")," "))}function At(t,a){if(t&1){let e=C();l(0,"i-tabler",62),b("click",function(){v(e);let i=d().$implicit,s=d(2);return x(s.copy(i.product.code))}),r()}}function Rt(t,a){if(t&1&&(l(0,"td",65)(1,"h5",66),c(2),r(),l(3,"div",59),g(4,"i-tabler",60),c(5),p(6,At,1,0,"i-tabler",58),r()()),t&2){let e=a.$implicit;n(),I("matTooltip",e.product.name),n(),f(e.product.name),n(3),h(" ",e.product.code," "),n(),m("ngIf",e.product.code)}}function Nt(t,a){t&1&&(l(0,"th",67),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"warehouse.inventory.common.image")," "))}function $t(t,a){if(t&1){let e=C();l(0,"td",65)(1,"img",68),b("error",function(i){v(e);let s=d(2);return x(s.onImageError(i))})("click",function(){let i=v(e).$implicit,s=d(2);return x(s.openLightBox(i==null?null:i.seller_sku,i==null?null:i.images[0]))}),r()()}if(t&2){let e=a.$implicit;P("width",100,"px"),n(),I("alt",e.seller_sku),I("appLazyLoadImage",e.images[0])}}function Ft(t,a){t&1&&(l(0,"th",69),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"warehouse.inventory.common.quantity")," "))}function qt(t,a){if(t&1&&(l(0,"td",70),c(1),r()),t&2){let e,o=a.$implicit;P("width",100,"px"),n(),h(" ",(e=o==null?null:o.quantity)!==null&&e!==void 0?e:"N/A"," ")}}function zt(t,a){t&1&&(l(0,"th",71),g(1,"i-tabler",72),r())}function Yt(t,a){t&1&&g(0,"td",73),t&2&&P("width",70,"px")}function Gt(t,a){t&1&&g(0,"tr",74)}function Ut(t,a){t&1&&g(0,"tr",75)}function Jt(t,a){t&1&&(l(0,"div",76)(1,"div",77),c(2),_(3,"translate"),r()()),t&2&&(n(2),f(u(3,1,"common.noData")))}function Kt(t,a){if(t&1){let e=C();l(0,"mat-dialog-content",10)(1,"div",11)(2,"div",12)(3,"mat-card",13)(4,"mat-card-header",14)(5,"mat-card-title",15),c(6),_(7,"translate"),r()(),g(8,"mat-divider"),l(9,"mat-card-content",14)(10,"div",16)(11,"div",17)(12,"mat-form-field",18)(13,"mat-label"),c(14),_(15,"translate"),r(),l(16,"mat-icon",19),g(17,"i-tabler",20),r(),l(18,"mat-select",21),b("selectionChange",function(i){v(e);let s=d();return x(s.onSelectPresetReceiptTypeChange(i))}),p(19,Ot,2,2,"mat-option",22),r()()(),l(20,"div",17)(21,"mat-form-field",23)(22,"mat-label"),c(23),_(24,"translate"),r(),l(25,"mat-icon",19),g(26,"i-tabler",24),r(),l(27,"mat-select",21),b("selectionChange",function(i){v(e);let s=d();return x(s.onSelectPresetStatusChange(i))}),p(28,Bt,2,2,"mat-option",22),r()()(),l(29,"div",25)(30,"mat-label",26),c(31),_(32,"translate"),r()(),l(33,"div",27),c(34),r()(),l(35,"div",11)(36,"div",25)(37,"mat-label",26),c(38),_(39,"translate"),r()(),l(40,"div",27)(41,"mat-form-field",28)(42,"textarea",29),_(43,"translate"),Ne("ngModelChange",function(i){v(e);let s=d();return Re(s.delivery.note,i)||(s.delivery.note=i),x(i)}),r()()()()()()(),l(44,"div",30)(45,"mat-card",13)(46,"mat-card-header",14)(47,"mat-card-title",15),c(48),_(49,"translate"),r()(),l(50,"mat-card-content",31),g(51,"mat-divider"),l(52,"div",32),b("scroll",function(i){v(e);let s=d();return x(s.onScroll(i))}),l(53,"table",33),w(54,34),p(55,Vt,3,6,"th",35)(56,Wt,9,6,"td",36),S(),w(57,37),p(58,Ht,3,3,"th",38)(59,Rt,7,4,"td",39),S(),w(60,40),p(61,Nt,3,3,"th",41)(62,$t,2,4,"td",42),S(),w(63,43),p(64,Ft,3,3,"th",44)(65,qt,2,3,"td",45),S(),w(66,46),p(67,zt,2,0,"th",47)(68,Yt,1,2,"td",48),S(),p(69,Gt,1,0,"tr",49)(70,Ut,1,0,"tr",50),r(),p(71,Jt,4,3,"div",51),r()()()()()()}if(t&2){let e=d();n(6),f(u(7,24,"labels.info")),n(6),P("width",200,"px"),n(2),f(u(15,26,"warehouse.common.deliveryType")),n(4),m("value",e.type)("disabled",!0),n(),m("ngForOf",e.presetReceiptTypes),n(2),P("width",160,"px"),n(2),f(u(24,28,"warehouse.common.status")),n(4),m("value",e.status)("disabled",!0),n(),m("ngForOf",e.presetStatues),n(3),f(u(32,30,"warehouse.common.createdBy")),n(3),h(" ",e.getUsername(e.delivery.created_by)," "),n(4),f(u(39,32,"warehouse.common.note")),n(4),I("placeholder",u(43,34,"warehouse.common.notePlaceholder")),m("disabled",!0),Ae("ngModel",e.delivery.note),n(6),f(u(49,36,"warehouse.inventory.common.listSkus")),n(5),m("dataSource",e.skus),n(16),m("matHeaderRowDef",e.displayedColumns),n(),m("matRowDefColumns",e.displayedColumns),n(),m("ngIf",e.skus.length==0)}}function Qt(t,a){if(t&1){let e=C();l(0,"button",78),b("click",function(i){v(e);let s=d();return x(s.onSave(i))}),c(1),_(2,"translate"),r()}if(t&2){let e=d();m("disabled",!e.skus.length),n(),f(u(2,2,"buttons.save"))}}var De=class t extends Ce{constructor(e,o,i,s,D,E,pt,_t,ut){super(o,i,s,D);this.data=e;this.activeRoute=o;this.translateService=i;this.authenticationService=s;this.injector=D;this.lightbox=E;this.inventoryDeliveryService=pt;this.clipboard=_t;this.snackBar=ut;this.deliveryNumber=e?.delivery_number,this.delivery=e?.delivery,this.type=this.delivery?.type,this.status=this.delivery?.status}deliveryNumber;delivery;skus=[];displayedColumns=["sellerSku","productName","image","quantity","actions"];type="bill";presetReceiptTypes=["bill","supplier_return","faulty_product"];status="done";presetStatues=["done","confirmed","canceled","draft"];isTableScrolled=!1;isLoading=!1;getItems(){this.isLoading=!0,this.inventoryDeliveryService.getItemByNumber(this.delivery?.number??this.deliveryNumber).subscribe(e=>{this.delivery=e?.delivery??this.delivery,this.type=this.delivery?.type,this.status=this.delivery?.status,this.skus=e?.items??[],this.isLoading=!1})}ngOnInit(){this.getItems()}openSnackBar(e,o){this.snackBar.open(e,o,{horizontalPosition:"end",verticalPosition:"top",duration:4*1e3})}copy(e){this.clipboard.copy(e),this.openSnackBar(this.translateService.instant("labels.copySuccess")+` ${e}`,"")}openLightBox(e,o){if(!o)return;let i=[{caption:e,src:o}];this.lightbox.open(i,0)}onScroll(e){let o=e.target;this.isTableScrolled=o.scrollLeft>0}onSave(e){}onSelectPresetReceiptTypeChange(e){this.type=e.value}onSelectPresetStatusChange(e){this.status=e.value}getUsername(e){return e?e.split("@")[0]:null}static \u0275fac=function(o){return new(o||t)(y(pe),y(Y),y(j),y(be),y(F),y(we),y(A),y(H),y(V))};static \u0275cmp=T({type:t,selectors:[["app-warehouse-page-delivery-partial-detail"]],features:[q],decls:12,vars:10,consts:[["class","loading-overlay",4,"ngIf"],["mat-dialog-title","",1,"dialog-header"],["mat-dialog-close","","aria-label","\u0110\xF3ng",1,"btn-close-dialog-icon","cursor-pointer"],["mat-dialog-close","","data-icon","solar:close-square-bold",1,"iconify","icon-20"],["class","p-0 m-0 p-l-15 p-r-15 p-t-15 dialog-content",4,"ngIf"],["align","end",1,"p-10","dialog-actions","bg-dark"],["mat-stroked-button","","color","warn","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"loading-overlay"],["color","primary",3,"diameter"],[1,"p-0","m-0","p-l-15","p-r-15","p-t-15","dialog-content"],[1,"row"],[1,"col-lg-4","p-b-15"],[1,"cardWithShadow","m-b-0"],[1,"p-15"],[1,"m-b-0","text-black","f-s-16"],[1,"row","m-b-10"],[1,"col-sm-12","m-b-10"],["appearance","outline",1,"theme-select","m-r-10","input-height-46"],["matPrefix","",1,"m-r-0","p-r-0"],["name","menu",1,"icon-20","cursor-pointer"],[3,"selectionChange","value","disabled"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"theme-select","m-r-10","d-flex","m-t-20","input-height-46"],["name","progress-help",1,"icon-20","cursor-pointer"],[1,"col-sm-12","d-flex","align-items-center"],[1,"f-w-600","d-block","m-b-10"],[1,"col-sm-12"],["appearance","outline",1,"w-100"],["rows","5","matInput","",3,"ngModelChange","disabled","placeholder","ngModel"],[1,"col-lg-8","p-b-15"],[1,"p-0"],[1,"table-responsive",3,"scroll"],["mat-table","",1,"w-100","table-default","table-custom-small",3,"dataSource"],["matColumnDef","sellerSku"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 fixed-width-column sticky-col-1",3,"ngClass",4,"matHeaderCellDef"],["mat-cell","","class","f-s-14 sticky-col-1",3,"ngClass",4,"matCellDef"],["matColumnDef","productName"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","image"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 fixed-width-column",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",3,"width",4,"matCellDef"],["matColumnDef","quantity"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 text-right fixed-width-column",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1 text-right",3,"width",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 p-t-10 f-s-14 text-center fixed-width-column",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1 text-center",3,"width",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center p-t-20 p-b-20",4,"ngIf"],[3,"value"],[4,"ngIf"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","fixed-width-column","sticky-col-1",3,"ngClass"],["mat-cell","",1,"f-s-14","sticky-col-1",3,"ngClass"],[1,"d-flex","align-items-center","gap-6"],[1,"f-s-15","f-w-700","m-t-4","m-b-0"],["name","copy","class","icon-12 cursor-pointer",3,"click",4,"ngIf"],[1,"m-t-3"],["name","hash",1,"icon-12","cursor-pointer"],[4,"ngFor","ngForOf"],["name","copy",1,"icon-12","cursor-pointer",3,"click"],[1,"f-w-900"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["matTooltipPosition","right",1,"f-s-15","f-w-400","m-t-4","m-b-0","w-100","text-truncate","cursor-pointer",2,"max-width","300px",3,"matTooltip"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","fixed-width-column"],["width","48",1,"rounded","cursor-pointer","product-image",3,"error","click","alt","appLazyLoadImage"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","text-right","fixed-width-column"],["mat-cell","",1,"mat-body-1","text-right"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","p-t-10","f-s-14","text-center","fixed-width-column"],["name","settings",1,"icon-20"],["mat-cell","",1,"mat-body-1","text-center"],["mat-header-row",""],["mat-row",""],[1,"text-center","p-t-20","p-b-20"],[1,"text-muted"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(o,i){o&1&&(p(0,Tt,2,1,"div",0),l(1,"h2",1),c(2),_(3,"translate"),r(),l(4,"mat-icon",2),g(5,"i",3),r(),p(6,Kt,72,38,"mat-dialog-content",4),l(7,"mat-dialog-actions",5)(8,"button",6),c(9),_(10,"translate"),r(),p(11,Qt,3,4,"button",7),r()),o&2&&(m("ngIf",i.isLoading),n(2),He(" ",u(3,6,"warehouse.inventory.delivery.detail")," #",i.delivery==null?null:i.delivery.number,`
`),n(4),m("ngIf",i.delivery),n(3),f(u(10,8,"buttons.close")),n(2),m("ngIf",i.delivery&&i.delivery.status!=="done"))},dependencies:[qe,ze,M,Qe,Xe,Ze,G,Q,K,U,J,B,X,ee,te,Z,ie,ne,ce,re,ae,me,oe,le,de,se,et,Ke,_e,ue,ge,fe,it,ve,xe,Se,L,W],styles:[".warehouse-dialog-delivery-create{max-width:95vw!important}  .dialog-header{position:relative;background-color:#fff;color:#000!important;padding:10px;font-weight:600}  .dialog-content{background-color:#e5e5e5}  .close-button{position:absolute;top:8px;right:8px;color:#fff}  .product-info .mat-mdc-header-row{height:45px!important}"]})};var Pe=class{order_id="";data;status=0;source="";constructor(a){if(a)for(let e in a)this[e]=a[e]}countProduct(){return this.data.items.length}hasManyProduct(){return this.data.items.length>1}getProducts(){let a=this.data.items,e=[];for(let o in a){let i=a[o],s=i.variation_info.fields,D="";for(let E in s)D+=D?", ":"",D+=`${s[E].name}: ${s[E].value}`;e.push({name:i.variation_info.name,variation:D,quantity:parseInt(i.quantity)})}return e}};var Ie=class t{constructor(a,e){this.http=a;this.backendService=e}apiServerPaths=ye.backendServer.paths;dataBigIdea=new N;_getModel(a){return new Pe(a)}getById(a){let e=this.apiServerPaths.gunoHub.order.detail.replace("{ORDER_ID}",a.toString()),o={params:{encryptParam:!0},headers:{Accept:"application/json"}};return this.backendService.get(e,o,k(i=>{let D=i.data?.order??!1;return D?this._getModel(D):!1}))}search(a){let e=this.apiServerPaths.gunoHub.order.search,o={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(let i in a)switch(i){default:o.params[i]=a[i]}return this.backendService.get(e,o,k(i=>{let s=i.data,D=s?.orders??[];s.orders=[];for(let E in D)s.orders.push(this._getModel(D[E]));return i.data=s,i.data}))}static \u0275fac=function(e){return new(e||t)(O(z),O(he))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};function Zt(t,a){if(t&1){let e=C();l(0,"i-tabler",11),b("click",function(){v(e);let i=d(4);return x(i.copy(i.element.order_id))}),r()}}function ei(t,a){if(t&1){let e=C();l(0,"span",8)(1,"span",9),b("click",function(){v(e);let i=d(3);return x(i.openDetail())}),c(2),r(),p(3,Zt,1,0,"i-tabler",10),r()}if(t&2){let e=d(3);n(2),f(e.element.order_id),n(),m("ngIf",e.element.order_id)}}function ti(t,a){if(t&1){let e=C();l(0,"div",4)(1,"mat-icon",5),b("click",function(){v(e);let i=d(2);return x(i.openDetail())}),g(2,"i-tabler",6),r(),p(3,ei,4,2,"span",7),r()}if(t&2){let e=d(2);n(3),m("ngIf",e.element.order_id)}}function ii(t,a){if(t&1){let e=C();l(0,"i-tabler",11),b("click",function(){v(e);let i=d(4);return x(i.copy(i.element.order_id))}),r()}}function ai(t,a){if(t&1){let e=C();l(0,"span",8)(1,"span",9),b("click",function(){v(e);let i=d(3);return x(i.openDetail())}),c(2),r(),p(3,ii,1,0,"i-tabler",10),r()}if(t&2){let e=d(3);n(2),f(e.element.order_id),n(),m("ngIf",e.element.order_id)}}function ni(t,a){if(t&1){let e=C();l(0,"div",4)(1,"mat-icon",5),b("click",function(){v(e);let i=d(2);return x(i.openDetail())}),g(2,"i-tabler",12),r(),p(3,ai,4,2,"span",7),r()}if(t&2){let e=d(2);n(3),m("ngIf",e.element.order_id)}}function ri(t,a){if(t&1){let e=C();l(0,"i-tabler",11),b("click",function(){v(e);let i=d(4);return x(i.copy(i.element.order_id))}),r()}}function oi(t,a){if(t&1){let e=C();l(0,"span",8)(1,"span",9),b("click",function(){v(e);let i=d(3);return x(i.openDetail())}),c(2),r(),p(3,ri,1,0,"i-tabler",10),r()}if(t&2){let e=d(3);n(2),f(e.element.order_id),n(),m("ngIf",e.element.order_id)}}function li(t,a){if(t&1){let e=C();l(0,"div",4)(1,"mat-icon",5),b("click",function(){v(e);let i=d(2);return x(i.openDetail())}),g(2,"i-tabler",13),r(),p(3,oi,4,2,"span",7),r()}if(t&2){let e=d(2);n(3),m("ngIf",e.element.order_id)}}function ci(t,a){if(t&1&&(l(0,"div"),w(1,2),p(2,ti,4,1,"div",3)(3,ni,4,1,"div",3)(4,li,4,1,"div",3),S(),r()),t&2){let e=d();n(),m("ngSwitch",e.element.source==null?null:e.element.source.toLowerCase()),n(),m("ngSwitchCase","facebook"),n(),m("ngSwitchCase","tiktok"),n(),m("ngSwitchCase","shopee")}}function mi(t,a){if(t&1){let e=C();l(0,"i-tabler",11),b("click",function(){v(e);let i=d(3);return x(i.copy(i.element.order_id))}),r()}}function di(t,a){if(t&1){let e=C();l(0,"span",15)(1,"span",9),b("click",function(){v(e);let i=d(2);return x(i.openDetail())}),c(2),r(),p(3,mi,1,0,"i-tabler",10),r()}if(t&2){let e=d(2);n(2),f(e.element.order_id),n(),m("ngIf",e.element.order_id)}}function si(t,a){if(t&1&&p(0,di,4,2,"span",14),t&2){let e=d();m("ngIf",e.element.order_id)}}var ke=class t{constructor(a,e,o){this.clipboard=a;this.snackBar=e;this.translateService=o}element;click;clickDetail=new Le;ngOnInit(){}openSnackBar(a,e){this.snackBar.open(a,e,{horizontalPosition:"end",verticalPosition:"top",duration:4*1e3})}openDetail(){this.clickDetail.emit(this.element)}copy(a){this.clipboard.copy(a),this.openSnackBar(this.translateService.instant("labels.copySuccess")+` ${a}`,"")}static \u0275fac=function(e){return new(e||t)(y(H),y(V),y(j))};static \u0275cmp=T({type:t,selectors:[["app-order-partial-source-logo"]],inputs:{element:"element",click:"click"},outputs:{clickDetail:"clickDetail"},decls:3,vars:2,consts:[["otherSource",""],[4,"ngIf","ngIfElse"],[1,"m-b-2",3,"ngSwitch"],["class","d-flex text-dark-200",4,"ngSwitchCase"],[1,"d-flex","text-dark-200"],["matPrefix","",1,"m-r-0","p-r-0","rounded-pill",3,"click"],["name","brand-facebook",1,"icon-20","cursor-pointer","text-facebook"],["class","m-l-5 f-w-500 text-black",4,"ngIf"],[1,"m-l-5","f-w-500","text-black"],[1,"m-r-4",3,"click"],["name","copy","class","icon-12 cursor-pointer",3,"click",4,"ngIf"],["name","copy",1,"icon-12","cursor-pointer",3,"click"],["name","brand-tiktok",1,"icon-20","cursor-pointer","text-tiktok"],["name","brand-shopee",1,"icon-20","cursor-pointer","text-shopee"],["class","f-w-500 text-black",4,"ngIf"],[1,"f-w-500","text-black"]],template:function(e,o){if(e&1&&p(0,ci,5,4,"div",1)(1,si,1,1,"ng-template",null,0,Fe),e&2){let i=We(2);m("ngIf",o.element.source)("ngIfElse",i)}},dependencies:[M,Ye,Ge,J,B,L],styles:[".text-facebook{color:#0766ff}  .text-tiktok{color:#000}  .text-shopee{color:#fd5e32}"]})};var Te=class t{element;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-order-partial-status"]],inputs:{element:"element"},decls:3,vars:6,template:function(e,o){e&1&&(l(0,"label"),c(1),_(2,"translate"),r()),e&2&&(je("text-white rounded f-w-600 p-6 p-y-4 f-s-12 d-block w-100 label-order-status-",o.element.status,""),n(),h(" ",u(2,4,"order.common.status"+o.element.status),`
`))},dependencies:[W],styles:[".text-facebook{color:#0766ff}  .text-tiktok{color:#000}  .text-shopee{color:#fd5e32}  .label-order-status-0{background-color:#09979c}  .label-order-status-1{background-color:#013eb4}  .label-order-status-2{background-color:#fa8c17}  .label-order-status-3{background-color:#52c41b}  .label-order-status-4{background-color:#e0695c}  .label-order-status-5{background-color:#a8081a}  .label-order-status-6{background-color:#f5222d}  .label-order-status-7{background-color:#485467}  .label-order-status-8{background-color:#722ed1}  .label-order-status-9{background-color:#eb2f96}  .label-order-status-11{background-color:#485467}  .label-order-status-12{background-color:#485467}  .label-order-status-15{background-color:#485467}  .label-order-status-16{background-color:#485467}"]})};function ui(t,a){if(t&1&&(l(0,"h2",6),c(1),r()),t&2){let e=d();n(),h(" Chi ti\u1EBFt \u0111\u01A1n h\xE0ng #",e.order==null?null:e.order.order_id,`
`)}}function fi(t,a){if(t&1&&(l(0,"div",13)(1,"div",14)(2,"mat-label",15),c(3),_(4,"translate"),r()(),l(5,"div",20),c(6),_(7,"date"),r()()),t&2){let e=d(2);n(3),f(u(4,2,"warehouse.common.orderInsertedAt")),n(3),h(" ",$e(7,4,e.order==null?null:e.order.inserted_at,"HH:mm, dd/MM/YYYY")," ")}}function gi(t,a){t&1&&(l(0,"th",46),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"warehouse.inventory.common.sellerSku")," "))}function vi(t,a){if(t&1){let e=C();l(0,"i-tabler",53),b("click",function(){v(e);let i=d().$implicit,s=d(2);return x(s.copy(i.display_id))}),r()}}function xi(t,a){if(t&1&&(l(0,"td",47)(1,"div",48)(2,"div")(3,"h5",49),c(4),p(5,vi,1,0,"i-tabler",50),r(),l(6,"div",51),g(7,"i-tabler",52),l(8,"span"),c(9),r()()()()()),t&2){let e,o=a.$implicit;n(4),h("",(e=o==null?null:o.display_id)!==null&&e!==void 0?e:"N/A"," "),n(),m("ngIf",o.display_id),n(4),f(o.detail)}}function yi(t,a){t&1&&(l(0,"th",46),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"warehouse.inventory.common.productCode")," "))}function hi(t,a){if(t&1){let e=C();l(0,"i-tabler",53),b("click",function(){v(e);let i=d().$implicit,s=d(2);return x(s.copy(i.product_display_id))}),r()}}function bi(t,a){if(t&1&&(l(0,"td",54)(1,"h5",55),c(2),r(),l(3,"div",51),g(4,"i-tabler",52),c(5),p(6,hi,1,0,"i-tabler",50),r()()),t&2){let e=a.$implicit;n(),I("matTooltip",e.name),n(),f(e.name),n(3),h(" ",e.product_display_id," "),n(),m("ngIf",e.product_display_id)}}function Ci(t,a){t&1&&(l(0,"th",46),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"warehouse.inventory.common.image")," "))}function wi(t,a){if(t&1){let e=C();l(0,"td",54)(1,"img",56),b("error",function(i){v(e);let s=d(2);return x(s.onImageError(i))})("click",function(){let i=v(e).$implicit,s=d(2);return x(s.openLightBox(i==null?null:i.display_id,i==null?null:i.images[0]))}),r()()}if(t&2){let e=a.$implicit;P("width",100,"px"),n(),I("alt",e.seller_sku),I("appLazyLoadImage",e.images[0])}}function Si(t,a){t&1&&(l(0,"th",57),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"warehouse.inventory.common.quantity")," "))}function Di(t,a){if(t&1&&(l(0,"td",58),c(1),r()),t&2){let e,o=a.$implicit;P("width",100,"px"),n(),h(" ",(e=o==null?null:o.quantity)!==null&&e!==void 0?e:"N/A"," ")}}function Pi(t,a){t&1&&(l(0,"th",57),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"order.common.deliveryNumber")," "))}function Ii(t,a){if(t&1){let e=C();l(0,"td",58)(1,"a",59),b("click",function(){let i=v(e).$implicit,s=d(2);return x(s.openDialogDetailDelivery(i==null?null:i.delivery_number))}),c(2),r()()}if(t&2){let e,o=a.$implicit;P("width",150,"px"),n(2),f((e=o==null?null:o.delivery_number)!==null&&e!==void 0?e:"N/A")}}function ki(t,a){t&1&&(l(0,"th",60),c(1),_(2,"translate"),r()),t&2&&(n(),h(" ",u(2,1,"order.common.deliveryStatus")," "))}function Ti(t,a){if(t&1&&(l(0,"label",66),c(1),_(2,"translate"),r()),t&2){let e=d().$implicit;n(),f(u(2,1,"warehouse.inventory.delivery.status."+e.delivery_status))}}function Ei(t,a){if(t&1&&(l(0,"label",67),c(1),_(2,"translate"),r()),t&2){let e=d().$implicit;n(),f(u(2,1,"warehouse.inventory.delivery.status."+e.delivery_status))}}function Oi(t,a){if(t&1&&(l(0,"label",68),c(1),_(2,"translate"),r()),t&2){let e=d().$implicit;n(),f(u(2,1,"warehouse.inventory.delivery.status."+e.delivery_status))}}function Mi(t,a){if(t&1&&(l(0,"label",69),c(1),_(2,"translate"),r()),t&2){let e=d().$implicit;n(),f(u(2,1,"warehouse.inventory.delivery.status."+e.delivery_status))}}function Bi(t,a){if(t&1&&(l(0,"td",61),p(1,Ti,3,3,"label",62)(2,Ei,3,3,"label",63)(3,Oi,3,3,"label",64)(4,Mi,3,3,"label",65),r()),t&2){let e=a.$implicit;P("width",150,"px"),n(),m("ngIf",e.delivery_status==="done"),n(),m("ngIf",e.delivery_status==="confirmed"),n(),m("ngIf",e.delivery_status==="canceled"),n(),m("ngIf",e.delivery_status==="draft")}}function Vi(t,a){t&1&&(l(0,"th",70),g(1,"i-tabler",71),r())}function Li(t,a){t&1&&g(0,"td",61),t&2&&P("width",70,"px")}function ji(t,a){t&1&&g(0,"tr",72)}function Wi(t,a){t&1&&g(0,"tr",73)}function Hi(t,a){t&1&&(l(0,"div",74)(1,"div",75),c(2),_(3,"translate"),r()()),t&2&&(n(2),f(u(3,1,"common.noData")))}function Ai(t,a){if(t&1&&(l(0,"mat-dialog-content",7)(1,"div",8)(2,"div",9)(3,"mat-card",10)(4,"mat-card-header",11)(5,"mat-card-title",12),c(6),_(7,"translate"),r()(),g(8,"mat-divider"),l(9,"mat-card-content",11)(10,"div",13)(11,"div",14)(12,"mat-label",15),c(13),_(14,"translate"),r()(),l(15,"div",14),g(16,"app-order-partial-source-logo",16),r()(),l(17,"div",13)(18,"div",14)(19,"mat-label",15),c(20),_(21,"translate"),r()(),l(22,"div",17),g(23,"app-order-partial-status",16),r()(),p(24,fi,8,7,"div",18),l(25,"div",13)(26,"div",14)(27,"mat-label",15),c(28),_(29,"translate"),r()(),l(30,"div",19),c(31),_(32,"number"),r()(),l(33,"div",8)(34,"div",14)(35,"mat-label",15),c(36),_(37,"translate"),r()(),l(38,"div",20)(39,"mat-form-field",21),g(40,"textarea",22),_(41,"translate"),r()()()()()(),l(42,"div",23)(43,"mat-card",10)(44,"mat-card-header",11)(45,"mat-card-title",12),c(46),_(47,"translate"),r()(),l(48,"mat-card-content",24),g(49,"mat-divider"),l(50,"div",25)(51,"table",26),w(52,27),p(53,gi,3,3,"th",28)(54,xi,10,3,"td",29),S(),w(55,30),p(56,yi,3,3,"th",28)(57,bi,7,4,"td",31),S(),w(58,32),p(59,Ci,3,3,"th",28)(60,wi,2,4,"td",33),S(),w(61,34),p(62,Si,3,3,"th",35)(63,Di,2,3,"td",36),S(),w(64,37),p(65,Pi,3,3,"th",35)(66,Ii,3,3,"td",36),S(),w(67,38),p(68,ki,3,3,"th",39)(69,Bi,5,6,"td",40),S(),w(70,41),p(71,Vi,2,0,"th",42)(72,Li,1,2,"td",40),S(),p(73,ji,1,0,"tr",43)(74,Wi,1,0,"tr",44),r(),p(75,Hi,4,3,"div",45),r()()()()()()),t&2){let e=d();n(6),f(u(7,17,"labels.info")),n(7),f(u(14,19,"warehouse.common.orderType")),n(3),m("element",e.order),n(4),f(u(21,21,"warehouse.common.status")),n(3),m("element",e.order),n(),m("ngIf",e.order.inserted_at),n(4),f(u(29,23,"labels.totalAmount")),n(3),h(" ",u(32,25,e.order==null||e.order.data==null?null:e.order.data.money_to_collect)," \u20AB "),n(5),f(u(37,27,"warehouse.common.note")),n(4),I("placeholder",u(41,29,"warehouse.common.notePlaceholder")),m("disabled",!0)("value",e.order==null||e.order.data==null?null:e.order.data.note),n(6),f(u(47,31,"warehouse.inventory.common.listSkus")),n(5),m("dataSource",e.items),n(22),m("matHeaderRowDef",e.displayedColumns),n(),m("matRowDefColumns",e.displayedColumns),n(),m("ngIf",e.items.length==0)}}var st=class t extends Ce{constructor(e,o,i,s,D,E,pt,_t,ut,Ri,Ni){super(o,i,s,D);this.data=e;this.activeRoute=o;this.translateService=i;this.authenticationService=s;this.injector=D;this.dialog=E;this.lightbox=pt;this.orderService=_t;this.inventoryDeliveryService=ut;this.clipboard=Ri;this.snackBar=Ni;this.order=e?.order,this.orderId=e?.order_id;let ft=this.order?.data?.items.map(Be=>{let Ve=Be.variation_info;return Ve.quantity=Be.quantity,Ve})??[];this.items=ft}orderId;order;skus=[];items=[];displayedColumns=["sellerSku","productName","image","quantity","deliveryNumber","deliveryStatus","actions"];getOrderDetail(){this.orderService.getById(this.orderId).subscribe(e=>{this.order=e;let o=this.order?.data?.items.map(i=>{let s=i.variation_info;return s.quantity=i.quantity,s})??[];this.items=o,this.getItems()})}getItems(){this.order&&this.inventoryDeliveryService.getItemByOrderId(this.order.order_id).subscribe(e=>{this.skus=e?.items??[],this.items=this.items.map(o=>{let i=this.skus.find(s=>s.seller_sku===o.display_id);return typeof i<"u"&&(o.delivery_number=i.delivery_number,o.delivery_status=i.delivery_status),o})})}ngOnInit(){!this.order&&this.orderId&&this.getOrderDetail(),this.getItems()}openSnackBar(e,o){this.snackBar.open(e,o,{horizontalPosition:"end",verticalPosition:"top",duration:4*1e3})}copy(e){this.clipboard.copy(e),this.openSnackBar(this.translateService.instant("labels.copySuccess")+` ${e}`,"")}openLightBox(e,o){if(!o)return;let i=[{caption:e,src:o}];this.lightbox.open(i,0)}openDialogDetailDelivery(e){let o=this.dialog.open(De,{autoFocus:!0,width:"95vw",height:"auto",panelClass:"warehouse-dialog-delivery-create",disableClose:!0,data:{delivery_number:e}})}static \u0275fac=function(o){return new(o||t)(y(pe),y(Y),y(j),y(be),y(F),y(tt),y(we),y(Ie),y(A),y(H),y(V))};static \u0275cmp=T({type:t,selectors:[["app-warehouse-page-delivery-partial-detail"]],features:[q],decls:8,vars:5,consts:[["mat-dialog-title","","class","dialog-header",4,"ngIf"],["mat-dialog-close","","aria-label","\u0110\xF3ng",1,"btn-close-dialog-icon","cursor-pointer"],["mat-dialog-close","","data-icon","solar:close-square-bold",1,"iconify","icon-20"],["class","p-0 m-0 p-l-15 p-r-15 p-t-15 dialog-content",4,"ngIf"],["align","end",1,"p-10","dialog-actions","bg-dark"],["mat-stroked-button","","color","warn","mat-dialog-close",""],["mat-dialog-title","",1,"dialog-header"],[1,"p-0","m-0","p-l-15","p-r-15","p-t-15","dialog-content"],[1,"row"],[1,"col-lg-3","p-b-15"],[1,"cardWithShadow","m-b-0"],[1,"p-15"],[1,"m-b-0","text-black","f-s-16"],[1,"row","m-b-10"],[1,"col-sm-12","d-flex","align-items-center"],[1,"f-w-600","d-block","m-b-10"],[3,"element"],[1,"col-sm-12","text-center"],["class","row m-b-10",4,"ngIf"],[1,"col-sm-12","text-dark-200"],[1,"col-sm-12"],["appearance","outline",1,"w-100"],["rows","5","matInput","",3,"disabled","placeholder","value"],[1,"col-lg-9","p-b-15"],[1,"p-0"],[1,"table-responsive"],["mat-table","",1,"w-100","table-default","table-custom-small",3,"dataSource"],["matColumnDef","sellerSku"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","f-s-14 fixed-width-column",4,"matCellDef"],["matColumnDef","productName"],["mat-cell","","class","mat-body-1 fixed-width-column",4,"matCellDef"],["matColumnDef","image"],["mat-cell","","class","mat-body-1 fixed-width-column",3,"width",4,"matCellDef"],["matColumnDef","quantity"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 text-right",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1 text-right text-dark fixed-width-column",3,"width",4,"matCellDef"],["matColumnDef","deliveryNumber"],["matColumnDef","deliveryStatus"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 text-center",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1 text-center fixed-width-column",3,"width",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 p-t-10 f-s-14 text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center p-t-20 p-b-20",4,"ngIf"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"f-s-14","fixed-width-column"],[1,"d-flex","align-items-center","gap-6"],[1,"f-s-15","f-w-700","m-t-4","m-b-0"],["name","copy","class","icon-12 cursor-pointer",3,"click",4,"ngIf"],[1,"m-t-3"],["name","hash",1,"icon-12","cursor-pointer"],["name","copy",1,"icon-12","cursor-pointer",3,"click"],["mat-cell","",1,"mat-body-1","fixed-width-column"],["matTooltipPosition","right",1,"f-s-15","f-w-400","m-t-4","m-b-0","w-100","text-truncate","cursor-pointer",2,"max-width","300px",3,"matTooltip"],["width","48",1,"rounded","cursor-pointer",3,"error","click","alt","appLazyLoadImage"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","text-right"],["mat-cell","",1,"mat-body-1","text-right","text-dark","fixed-width-column"],[1,"cursor-pointer","text-primary",3,"click"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","text-center"],["mat-cell","",1,"mat-body-1","text-center","fixed-width-column"],["class","text-white rounded f-w-600 p-6 p-y-4 f-s-12 bg-success",4,"ngIf"],["class","text-white rounded f-w-600 p-6 p-y-4 f-s-12 bg-warning",4,"ngIf"],["class","text-white rounded f-w-600 p-6 p-y-4 f-s-12 bg-error",4,"ngIf"],["class","text-white rounded f-w-600 p-6 p-y-4 f-s-12 bg-primary",4,"ngIf"],[1,"text-white","rounded","f-w-600","p-6","p-y-4","f-s-12","bg-success"],[1,"text-white","rounded","f-w-600","p-6","p-y-4","f-s-12","bg-warning"],[1,"text-white","rounded","f-w-600","p-6","p-y-4","f-s-12","bg-error"],[1,"text-white","rounded","f-w-600","p-6","p-y-4","f-s-12","bg-primary"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","p-t-10","f-s-14","text-center"],["name","settings",1,"icon-20"],["mat-header-row",""],["mat-row",""],[1,"text-center","p-t-20","p-b-20"],[1,"text-muted"]],template:function(o,i){o&1&&(p(0,ui,2,1,"h2",0),l(1,"mat-icon",1),g(2,"i",2),r(),p(3,Ai,76,33,"mat-dialog-content",3),l(4,"mat-dialog-actions",4)(5,"button",5),c(6),_(7,"translate"),r()()),o&2&&(m("ngIf",i.order),n(3),m("ngIf",i.order),n(3),f(u(7,3,"buttons.close")))},dependencies:[M,G,Q,K,U,B,X,ee,te,Z,ie,ne,ce,re,ae,me,oe,le,de,se,_e,ue,ge,fe,ve,xe,Se,L,ke,Te,Je,Ue,W],styles:[".order-dialog-detail{max-width:95vw!important}  .dialog-header{position:relative;background-color:#fff;color:#000!important;padding:10px;font-weight:600}  .dialog-content{background-color:#e5e5e5}  .dialog-actions{background-color:#1a2537}  .close-button{position:absolute;top:8px;right:8px;color:#fff}  .product-info .mat-mdc-header-row{height:45px!important}"]})};export{A as a,De as b,Ie as c,ke as d,Te as e,st as f};
