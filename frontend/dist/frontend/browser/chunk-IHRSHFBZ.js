import{c as ct,d as ut,e as _t,f as gt}from"./chunk-WJFD5EQ2.js";import"./chunk-JSUAOEMS.js";import{a as dt}from"./chunk-NQOY33G3.js";import{b as ft}from"./chunk-KLVANESB.js";import{e as lt}from"./chunk-YCX5PDJM.js";import{a as st}from"./chunk-EMKKK2TE.js";import{a as mt}from"./chunk-AYNFE6FB.js";import{a as vt}from"./chunk-6AMBXUQL.js";import{b as ot}from"./chunk-HW6NCLFS.js";import{a as Xe,b as Ze}from"./chunk-VD7526WH.js";import{a as pt}from"./chunk-ASVI2MGW.js";import{a as nt,s as at,t as rt}from"./chunk-L6F77YVF.js";import{$ as ye,Aa as Re,B as ce,Ba as Ne,Ca as Fe,Da as $e,F as ue,H as _e,Ia as Le,J as ge,Ja as je,Ka as ze,La as He,Ma as Ye,N as fe,Na as We,Pa as qe,Sa as Ge,T as he,U as xe,W as Ce,Xa as Ue,Ya as Je,Z as be,_ as ve,_a as Ke,aa as Se,ba as Me,da as we,gb as Qe,ha as Pe,ib as et,jb as tt,kb as it,l as se,na as Ie,o as de,oa as ke,pa as Oe,q as W,ua as Te,va as De,wa as Ee,xa as Be,ya as Ve,za as Ae}from"./chunk-72SSQTOY.js";import{Ab as Q,Ac as ie,Bc as F,Da as f,Ea as h,Fb as _,Hc as d,Ic as u,Ja as J,Jc as $,Kb as s,Kc as ne,Lb as x,Ob as X,Ub as a,Vb as r,Wb as v,Xb as y,Yb as S,_b as I,bc as b,dc as c,gc as B,hb as K,hc as Z,ia as T,jd as ae,mb as n,nb as w,nd as re,od as oe,pc as V,pd as L,qc as p,rc as C,sa as D,sc as g,sd as le,ta as E,tc as ee,td as me,uc as te,vc as A,wc as R,wd as j,xc as N,xd as pe}from"./chunk-7KMJWKAM.js";import{g as bt}from"./chunk-WWX6BADO.js";var G=bt(vt());function Mt(t,o){if(t&1&&(a(0,"span"),p(1),r()),t&2){let e=c();X("rounded-7 f-w-600 f-s-12 d-inline-block phone-carrier-",e.carrierName,""),n(),C(e.carrierName)}}var z=class t{phoneNumber;carrierName="";constructor(){}ngOnInit(){this.carrierName=this.getCarrierName()}getCarrierName(){if(!this.phoneNumber)return null;let e=this.phoneNumber.replace(/[^0-9*]/g,"").replace(/^840/,"0").replace(/^84/,"0").substring(0,4);if(e.length<3)return null;let i=e.substring(0,3),l={mobifone:["070","079","077","076","078","089","090","093"],vinaphone:["091","094","088","083","084","085","081","082"],viettel:["086","096","097","098","039","038","037","036","035","034","033","032"],vietnamobile:["092","052","056","058"],gmobile:["099","059"],itelecom:["087"]};for(let[m,k]of Object.entries(l))if(k.includes(i))return m;return null}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-order-partial-vietnam-phone-carrier"]],inputs:{phoneNumber:"phoneNumber"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"]],template:function(e,i){e&1&&_(0,Mt,2,4,"span",0),e&2&&s("ngIf",i.carrierName)},dependencies:[L],styles:[".phone-carrier-mobifone{color:#08979c;background:#e6fffb;border:1px solid #87e8de;margin-left:5px;padding:0 5px}  .phone-carrier-vinaphone{color:#0958d9;background:#e6f4ff;border:1px solid #91caff;margin-left:5px;padding:0 5px}  .phone-carrier-viettel{color:#cf1322;background:#fff1f0;border:1px solid #ffa39e;margin-left:5px;padding:0 5px}  .phone-carrier-vietnamobile{color:#d4380d;background:#fff2e8;border:1px solid #ffbb96;margin-left:5px;padding:0 5px}  .phone-carrier-gmobile{color:#08979c;background:#e6fffb;border:1px solid #87e8de;margin-left:5px;padding:0 5px}  .phone-carrier-itelecom{color:#08979c;background:#e6fffb;border:1px solid #87e8de;margin-left:5px;padding:0 5px}"]})};var Pt=()=>["/"],It=t=>({count:t}),ht=t=>({"sticky-box-shadow-right":t});function kt(t,o){if(t&1&&(a(0,"span"),p(1),d(2,"translate"),r(),p(3,"\xA0"),a(4,"span",19),p(5),d(6,"number"),r()),t&2){let e=c();n(),C(u(2,2,"labels.all")),n(4),C(u(6,4,e.totalOrders))}}function Ot(t,o){}function Tt(t,o){t&1&&_(0,Ot,0,0,"ng-template")}function Dt(t,o){if(t&1&&(a(0,"span"),p(1),r(),p(2,"\xA0"),a(3,"span",19),p(4),d(5,"number"),r()),t&2){let e,i=c().$implicit;n(),C(i.name),n(3),C(u(5,2,(e=i==null?null:i.count)!==null&&e!==void 0?e:0))}}function Et(t,o){}function Bt(t,o){t&1&&_(0,Et,0,0,"ng-template")}function Vt(t,o){if(t&1&&(a(0,"mat-tab"),_(1,Dt,6,4,"ng-template",16)(2,Bt,1,0,null,17),r()),t&2){c();let e=V(26);n(2),s("ngTemplateOutlet",e)}}function At(t,o){if(t&1&&(y(0),p(1),d(2,"translate"),S()),t&2){let e=c().$implicit;n(),g(" ",u(2,1,"labels.autoRefresh"+e)," ")}}function Rt(t,o){if(t&1&&(a(0,"mat-option",69),_(1,At,3,3,"ng-container",70),r()),t&2){let e=o.$implicit;s("value",e),n(),s("ngIf",e!=="customize")}}function Nt(t,o){if(t&1&&(y(0),p(1),d(2,"translate"),S()),t&2){let e=c().$implicit;n(),g(" ",u(2,1,"warehouse.common.orderSources."+e)," ")}}function Ft(t,o){if(t&1&&(a(0,"mat-option",69),_(1,Nt,3,3,"ng-container",70),r()),t&2){let e=o.$implicit;s("value",e),n(),s("ngIf",e!=="customize")}}function $t(t,o){if(t&1&&(y(0),p(1),S()),t&2){let e=c().$implicit;n(),g(" ",e.name," ")}}function Lt(t,o){if(t&1&&(a(0,"mat-option",69),_(1,$t,2,1,"ng-container",70),r()),t&2){let e=o.$implicit;s("value",e.id),n(),s("ngIf",e.name!=="")}}function jt(t,o){if(t&1&&(a(0,"mat-option",69),p(1),d(2,"translate"),r()),t&2){let e=o.$implicit;s("value",e),n(),g(" ",u(2,2,"admin.shop.product.common.sorts."+e)," ")}}function zt(t,o){if(t&1&&(a(0,"th",71),p(1),d(2,"translate"),r()),t&2){let e=c(2);s("ngClass",F(4,ht,e.isTableScrolled)),n(),g(" ",u(2,2,"labels.id")," ")}}function Ht(t,o){if(t&1){let e=I();a(0,"td",72)(1,"span",73)(2,"app-order-partial-source-logo",74),b("clickDetail",function(){let l=f(e).$implicit,m=c(2);return h(m.openDialogDetail(l))}),r()()()}if(t&2){let e=o.$implicit,i=c(2);x("width",150,"px"),s("ngClass",F(4,ht,i.isTableScrolled)),n(2),s("element",e)}}function Yt(t,o){t&1&&(a(0,"th",75),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.customer.mobile")," "))}function Wt(t,o){if(t&1){let e=I();a(0,"td",76)(1,"span",77),b("click",function(){let l=f(e).$implicit,m=c(2);return h(m.openDialogDetail(l))}),p(2),d(3,"translate"),v(4,"app-order-partial-vietnam-phone-carrier",78),r()()}if(t&2){let e,i=o.$implicit;x("width",100,"px"),n(),s("className",!(i==null||i.data==null)&&i.data.bill_phone_number?"text-dark-200 cursor-pointer":"text-error cursor-pointer"),n(),C(u(3,5,(e=i==null||i.data==null?null:i.data.bill_phone_number)!==null&&e!==void 0?e:"labels.missPhoneNumber")),n(2),s("phoneNumber",i==null||i.data==null?null:i.data.bill_phone_number)}}function qt(t,o){t&1&&(a(0,"th",75),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.customer.name")," "))}function Gt(t,o){if(t&1){let e=I();a(0,"td",76)(1,"span",79),b("click",function(){let l=f(e).$implicit,m=c(2);return h(m.openDialogDetail(l))}),p(2),r()()}if(t&2){let e,i=o.$implicit;x("width",220,"px"),n(2),C((e=(e=i==null||i.data==null||i.data.customer==null?null:i.data.customer.username)!==null&&e!==void 0?e:i==null||i.data==null||i.data.customer==null?null:i.data.customer.name)!==null&&e!==void 0?e:"N/A")}}function Ut(t,o){t&1&&(a(0,"th",75),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.product")," "))}function Jt(t,o){t&1&&(a(0,"span",84),p(1),d(2,"translate"),r()),t&2&&(n(),C(u(2,1,"order.common.noProduct")))}function Kt(t,o){if(t&1){let e=I();a(0,"span",85),b("click",function(){f(e);let l=c().$implicit,m=c(2);return h(m.openDialogDetail(l))}),p(1),d(2,"translate"),r()}if(t&2){let e=c().$implicit;n(),ee("",u(2,2,"order.common.hasManyProduct")," (",e.countProduct(),")")}}function Qt(t,o){if(t&1){let e=I();a(0,"div",86),b("click",function(){f(e);let l=c().$implicit,m=c(2);return h(m.openDialogDetail(l))}),p(1),r()}if(t&2){let e,i,l=c().$implicit;Z("matTooltip","",(e=l.getProducts()[0])==null?null:e.name," ",(e=l.getProducts()[0])==null?null:e.variation," x ",(e=l.getProducts()[0])==null?null:e.quantity,""),n(),te(" ",(i=l.getProducts()[0])==null?null:i.name," ",(i=l.getProducts()[0])==null?null:i.variation," x ",(i=l.getProducts()[0])==null?null:i.quantity," ")}}function Xt(t,o){if(t&1&&(a(0,"td",80),_(1,Jt,3,3,"span",81)(2,Kt,3,4,"span",82)(3,Qt,2,7,"div",83),r()),t&2){let e=o.$implicit;x("width",350,"px"),n(),s("ngIf",!e.countProduct()),n(),s("ngIf",e.hasManyProduct()),n(),s("ngIf",e.countProduct()===1)}}function Zt(t,o){t&1&&(a(0,"th",75),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.note")," "))}function ei(t,o){if(t&1&&(a(0,"td",87)(1,"div",88),p(2),r()()),t&2){let e,i=o.$implicit;x("width",350,"px"),n(2),g(" ",(e=i==null||i.data==null?null:i.data.note)!==null&&e!==void 0?e:"N/A"," ")}}function ti(t,o){t&1&&(a(0,"th",75),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.customer.address")," "))}function ii(t,o){if(t&1&&(a(0,"td",76)(1,"div",88),p(2),r()()),t&2){let e,i=o.$implicit;x("width",350,"px"),n(2),g(" ",(e=i==null||i.data==null||i.data.customer==null||i.data.customer.shop_customer_addresses[0]==null?null:i.data.customer.shop_customer_addresses[0].full_address)!==null&&e!==void 0?e:"N/A"," ")}}function ni(t,o){t&1&&(a(0,"th",75),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.customer.shipping")," "))}function ai(t,o){if(t&1&&(a(0,"div",91),p(1),r()),t&2){let e=c().$implicit;n(),g(" ",e.shipping_info.name," ")}}function ri(t,o){if(t&1){let e=I();a(0,"div",92)(1,"span",93),p(2),a(3,"i-tabler",94),b("click",function(){f(e);let l=c().$implicit,m=c(2);return h(m.copy(l.shipping_info.trackingNumber))}),r()()()}if(t&2){let e=c().$implicit;n(2),g("",e.shipping_info.trackingNumber," ")}}function oi(t,o){if(t&1&&(a(0,"td",76),_(1,ai,2,1,"div",89)(2,ri,4,1,"div",90),r()),t&2){let e=o.$implicit;x("width",350,"px"),n(),s("ngIf",e==null||e.shipping_info==null?null:e.shipping_info.name),n(),s("ngIf",e==null||e.shipping_info==null?null:e.shipping_info.trackingNumber)}}function li(t,o){t&1&&(a(0,"th",95),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.totalAmount")," "))}function mi(t,o){if(t&1&&(a(0,"td",96),p(1),d(2,"number"),r()),t&2){let e=o.$implicit;x("width",50,"px"),n(),g(" ",u(2,3,e==null||e.data==null?null:e.data.money_to_collect),` \u20AB
`)}}function pi(t,o){t&1&&(a(0,"th",95),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.insertedAt")," "))}function si(t,o){if(t&1&&(a(0,"td",96),p(1),d(2,"date"),r()),t&2){let e=o.$implicit;x("width",50,"px"),n(),g(" ",$(2,3,e==null?null:e.inserted_at,"HH:mm dd/MM/YYYY")," ")}}function di(t,o){t&1&&(a(0,"th",95),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"labels.updatedAt")," "))}function ci(t,o){if(t&1&&(a(0,"td",96),p(1),d(2,"date"),r()),t&2){let e=o.$implicit;x("width",50,"px"),n(),g(" ",$(2,3,e==null?null:e.updated_at,"HH:mm dd/MM/YYYY")," ")}}function ui(t,o){t&1&&(a(0,"th",97),p(1),d(2,"translate"),r()),t&2&&(n(),g(" ",u(2,1,"warehouse.common.status")," "))}function _i(t,o){if(t&1&&(a(0,"td",98),v(1,"app-order-partial-status",99),r()),t&2){let e=o.$implicit;x("width",150,"px"),n(),s("element",e)}}function gi(t,o){t&1&&v(0,"tr",100)}function fi(t,o){t&1&&v(0,"tr",101)}function hi(t,o){t&1&&(a(0,"div",102)(1,"div",103),p(2),d(3,"translate"),r()()),t&2&&(n(2),C(u(3,1,"common.noData")))}function xi(t,o){if(t&1){let e=I();a(0,"mat-card-content",20),v(1,"mat-divider"),a(2,"div",21)(3,"button",22),b("click",function(){f(e);let l=c();return h(l.openDialogCreateDelivery())}),v(4,"i",23),r(),a(5,"mat-form-field",24)(6,"mat-label"),p(7),d(8,"translate"),r(),a(9,"mat-icon",25),v(10,"i-tabler",26),r(),a(11,"mat-select",27),b("selectionChange",function(l){f(e);let m=c();return h(m.onSelectPresetAutoRefreshChange(l))}),_(12,Rt,2,2,"mat-option",28),r()(),a(13,"mat-form-field",24)(14,"mat-label"),p(15),d(16,"translate"),r(),a(17,"input",29),d(18,"translate"),b("keyup.enter",function(l){f(e);let m=c();return h(m.onInputOrderEnter(l))}),N("ngModelChange",function(l){f(e);let m=c();return R(m.keyword,l)||(m.keyword=l),h(l)}),r()(),a(19,"mat-form-field",24)(20,"mat-label"),p(21),d(22,"translate"),r(),a(23,"mat-icon",25),v(24,"i-tabler",30),r(),a(25,"mat-select",27),b("selectionChange",function(l){f(e);let m=c();return h(m.onSelectPresetOrderSourceChange(l))}),_(26,Ft,2,2,"mat-option",28),r()(),a(27,"mat-form-field",24)(28,"mat-label"),p(29),d(30,"translate"),r(),a(31,"mat-select",31),b("selectionChange",function(l){f(e);let m=c();return h(m.onOrderStatusChange(l))}),_(32,Lt,2,2,"mat-option",28),r()(),a(33,"mat-form-field",24)(34,"mat-label"),p(35),d(36,"translate"),r(),a(37,"mat-date-range-input",32)(38,"input",33),d(39,"translate"),N("ngModelChange",function(l){f(e);let m=c();return R(m.startDate,l)||(m.startDate=l),h(l)}),r(),a(40,"input",34),d(41,"translate"),N("ngModelChange",function(l){f(e);let m=c();return R(m.endDate,l)||(m.endDate=l),h(l)}),r()(),v(42,"mat-datepicker-toggle",35)(43,"mat-date-range-picker",null,1),r(),a(45,"mat-form-field",36)(46,"mat-label"),p(47),d(48,"translate"),r(),a(49,"mat-icon",25),v(50,"i-tabler",37),r(),a(51,"mat-select",27),b("selectionChange",function(l){f(e);let m=c();return h(m.onSelectSortChange(l))}),_(52,jt,3,4,"mat-option",28),r()(),v(53,"div",38),d(54,"number"),d(55,"translate"),a(56,"button",39),b("click",function(){f(e);let l=c();return h(l.filter())}),v(57,"i",40),r()(),v(58,"mat-divider"),a(59,"div",41),b("scroll",function(l){f(e);let m=c();return h(m.onScroll(l))}),a(60,"table",42),y(61,43),_(62,zt,3,6,"th",44)(63,Ht,3,6,"td",45),S(),y(64,46),_(65,Yt,3,3,"th",47)(66,Wt,5,7,"td",48),S(),y(67,49),_(68,qt,3,3,"th",47)(69,Gt,3,3,"td",48),S(),y(70,50),_(71,Ut,3,3,"th",47)(72,Xt,4,5,"td",51),S(),y(73,52),_(74,Zt,3,3,"th",47)(75,ei,3,3,"td",53),S(),y(76,54),_(77,ti,3,3,"th",47)(78,ii,3,3,"td",48),S(),y(79,55),_(80,ni,3,3,"th",47)(81,oi,3,4,"td",48),S(),y(82,56),_(83,li,3,3,"th",57)(84,mi,3,5,"td",58),S(),y(85,59),_(86,pi,3,3,"th",57)(87,si,3,6,"td",58),S(),y(88,60),_(89,di,3,3,"th",57)(90,ci,3,6,"td",58),S(),y(91,61),_(92,ui,3,3,"th",62)(93,_i,2,3,"td",63),S(),_(94,gi,1,0,"tr",64)(95,fi,1,0,"tr",65),r()(),_(96,hi,4,3,"div",66),v(97,"mat-divider",67),a(98,"mat-paginator",68),b("page",function(l){f(e);let m=c();return h(m.onPageChange(l))}),r()()}if(t&2){let e=V(44),i=c();n(5),x("width",160,"px"),n(2),C(u(8,44,"labels.autoRefresh")),n(4),s("value",i.presetAutoRefresh),n(),s("ngForOf",i.presetAutoRefreshs),n(),x("width",200,"px"),n(2),C(u(16,46,"warehouse.common.keyword")),n(2),B("placeholder",u(18,48,"warehouse.common.keywordPlaceholder")),A("ngModel",i.keyword),n(2),x("width",160,"px"),n(2),C(u(22,50,"warehouse.common.orderSource")),n(4),s("value",i.orderSource),n(),s("ngForOf",i.presetOrderSources),n(),x("width",200,"px"),n(2),C(u(30,52,"warehouse.common.orderStatus")),n(2),s("value",i.orderStatus),n(),s("ngForOf",i.orderStatuses),n(),x("width",250,"px"),n(2),C(u(36,54,"labels.selectDate")),n(2),s("rangePicker",e),n(),B("placeholder",u(39,56,"labels.startDate")),A("ngModel",i.startDate),n(2),B("placeholder",u(41,58,"labels.endDate")),A("ngModel",i.endDate),n(2),s("for",e),n(3),x("width",320,"px"),n(2),C(u(48,60,"labels.sortBy")),n(4),s("value",i.sort),n(),s("ngForOf",i.productSorts),n(),s("innerHTML",$(55,64,"order.search.findCountOrder",F(67,It,u(54,62,i.pageLength))),K),n(7),s("dataSource",i.orders)("trackBy",i.trackById),n(34),s("matHeaderRowDef",i.displayedColumns),n(),s("matRowDefColumns",i.displayedColumns),n(),s("ngIf",i.orders.length==0),n(2),s("length",i.pageLength)("pageIndex",i.pageIndex)("pageSize",i.pageSize)("pageSizeOptions",i.pageSizeOptions)}}var H=class t extends rt{constructor(e,i,l,m,k,P,O,U,bi,vi){super(e,i,l,m);this.activeRoute=e;this.translateService=i;this.authenticationService=l;this.injector=m;this.sidenavService=k;this.dialog=P;this.location=O;this.clipboard=U;this.snackBar=bi;this.orderService=vi;this.activeRoute.queryParams.subscribe(M=>{this.tab=M.tab??"all",this.selectedTabIndex=this.tabs.findIndex(Ct=>Ct===this.tab)||0,this.currentPage=M.page??1,this.currentPage=parseInt(this.currentPage.toString()),this.pageIndex=this.currentPage-1,this.sort=M.sort??this.sort,this.keyword=M.keyword??"",this.sku=M.sku??"",this.orderStatus=M.status?M.status.split(",").map(Number):[],this.sort=parseInt(this.sort.toString()),this.presetAutoRefresh=M.refresh??"not-set",this.orderSource=M.source??"not-set"}),this.tabs.forEach(M=>{this.tabsStats[M]=0})}selectedTabIndex=0;tab="all";tabs=["all","ACTIVATE","DELETED"];tabsStats=[];keyword="";sku="";productSorts=[0,1,2,3];sort=1;presetDate="today";presetDates=["today","yesterday","last7days","last28days","this_week","this_month","customize"];presetAutoRefresh="not-set";presetAutoRefreshs=["not-set","5s","10s","20s"];orderSource="not-set";presetOrderSources=["not-set","facebook","tiktok","shopee"];orderStatus=null;orderStatuses=nt.status.pancake.statusesSorted;stats=[];orders=[];shops=[];displayedColumns=["id","customerMobile","customerName","product","note","customerAddress","shipping","totalAmount","insertedAt","updatedAt","status"];filterCount=0;shopId="-1";dateType="create";type="not-set";isTableScrolled=!1;totalOrders=0;sidenavSubscription=null;ngOnInit(){super.ngOnInit(),this.search(),this.autoRefresh(),this.sidenavSubscription=this.sidenavService.apply$.subscribe(e=>{this.startDate=e?.startDate,this.endDate=e?.endDate,this.shopId=e?.shopId,this.dateType=e?.dateType,this.presetDate=this.presetDates[this.presetDates.length-1],this.pageIndex=0,this.currentPage=1,this.search()})}ngOnDestroy(){super.ngOnDestroy(),this.sidenavSubscription.unsubscribe(),this._intervalAutoRefresh&&clearInterval(this._intervalAutoRefresh)}toggleSidenav(){this.sidenavService.toggle()}_intervalAutoRefresh=null;autoRefresh(){let e=0;switch(this.presetAutoRefresh){case"5s":e=5;break;case"10s":e=10;break;case"20s":e=20;break}this._intervalAutoRefresh&&clearInterval(this._intervalAutoRefresh),e&&(this._intervalAutoRefresh=setInterval(()=>{this.isTabVisible()&&this.search(!1)},e*1e3))}onTabChange(e){if(this.loadingState)return;let i=this.orderStatuses[e.index-1];typeof i<"u"?this.orderStatus=[i.id]:this.orderStatus=[],this.orders=[],this.pageIndex=0,this.currentPage=1,this.search()}search(e=!0){this.widgetLoadingState=!0;let i={loadingState:e,tab:this.tab,type:this.type,source:this.orderSource,page:this.currentPage,limit:this.pageSize,fd:(0,G.default)(this.startDate).format("YYYY-MM-DD"),td:(0,G.default)(this.endDate).format("YYYY-MM-DD"),sort:this.sort};this.keyword&&(i.keyword=this.keyword),this.sku&&(i.sku=this.sku),this.orderStatus&&this.orderStatus.length>0&&(this.orderStatus.every(k=>this.orderStatuses.some(P=>P.id===k))?i.status=this.orderStatus.join(","):this.orderStatus=[]),this.orderService.search(i).subscribe(m=>{this.orders=m?.orders??[],this.pageLength=m.count;let k=m?.stats.statuses;this.orderStatuses.map(P=>{let O=k.find(U=>U.status===P.id);return P.count=O?.total_order??0,P}),this.totalOrders=k.reduce((P,O)=>P+(O.status===7?0:O.total_order),0)});let l=["refresh="+this.presetAutoRefresh];for(let m in i)m!=="loadingState"&&l[m]!==""&&l[m]!==null&&l.push(m+"="+i[m]);this.location.replaceState("/order/management",l.join("&"))}filter(){this.pageIndex=0,this.currentPage=1,this.search()}openSnackBar(e,i){this.snackBar.open(e,i,{horizontalPosition:"end",verticalPosition:"top",duration:4*1e3})}copy(e){this.clipboard.copy(e),this.openSnackBar(this.translateService.instant("labels.copySuccess")+` ${e}`,"")}onPageChange(e){this.loadingState||this.pageSize===e.pageSize&&this.pageIndex===e.pageIndex||(this.pageIndex=e.pageIndex,this.currentPage=e.pageIndex+1,this.pageSize=e.pageSize,this.search())}onSelectPresetAutoRefreshChange(e){this.presetAutoRefresh=e.value,this.autoRefresh()}onSelectPresetOrderSourceChange(e){this.orderSource=e.value,this.search()}onOrderStatusChange(e){let i=e.value;this.orderStatus=i}onSelectSortChange(e){this.sort=e.value,this.search()}trackById(e,i){return i.order_id}openDialogDetail(e){this.dialog.open(gt,{autoFocus:!0,width:"95vw",height:"auto",panelClass:"order-dialog-detail",disableClose:!1,data:{order:e}}).afterClosed().subscribe(l=>{})}openDialogCreateDelivery(){}onInputOrderEnter(e){let i=e.target.value;this.keyword=i,this.pageIndex=0,this.currentPage=1,this.search()}onScroll(e){let i=e.target;this.isTableScrolled=i.scrollLeft>0}static \u0275fac=function(i){return new(i||t)(w(se),w(et),w(at),w(J),w(mt),w(Ge),w(ae),w(st),w(qe),w(ct))};static \u0275cmp=D({type:t,selectors:[["app-order-page-management"]],features:[Q],decls:27,vars:14,consts:[["listOrders",""],["picker",""],[1,"bg-white","rounded","p-20","m-b-20"],[1,"row"],[1,"col-sm-8"],[1,"page-title","m-0","f-s-18","f-w-600"],[1,"col-sm-4","text-right"],[1,"d-flex","align-items-center","justify-content-start","justify-content-lg-end"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"text-body-color",3,"routerLink"],["name","circle-filled",1,"icon-8"],[1,"breadcrumb-item","active"],[1,"rounded-sm","p-x-8","p-y-4","text-primary","bg-light-primary","f-s-12","f-w-500"],[1,"cardWithShadow","widget-container"],["mat-stretch-tabs","false","animationDuration","0ms",1,"theme-tab","label-padding","float-start","order-tab-statues",3,"selectedTabChange","selectedIndex"],["mat-tab-label",""],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[1,"badge","ms-auto","badge-custom-dark","text-dark"],[1,"p-0","p-b-10"],[1,"p-t-0","p-b-20","p-r-10","p-l-10","d-lg-flex"],["mat-mini-fab","","color","primary m-t-24 m-r-10",1,"d-flex",3,"click"],["data-icon","solar:widget-add-linear",1,"iconify","icon-20","d-flex"],["appearance","outline",1,"theme-select","m-r-10","d-flex","m-t-20","input-height-46"],["matPrefix","",1,"m-r-0","p-r-0"],["name","refresh",1,"icon-20","cursor-pointer"],[3,"selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","",3,"keyup.enter","ngModelChange","placeholder","ngModel"],["name","social",1,"icon-20","cursor-pointer"],["multiple","",3,"selectionChange","value"],[3,"rangePicker"],["matStartDate","","readonly","",3,"ngModelChange","placeholder","ngModel"],["matEndDate","","readonly","",3,"ngModelChange","placeholder","ngModel"],["matIconSuffix","",3,"for"],["appearance","outline",1,"theme-select","m-r-10","m-t-20","input-height-46"],["name","transfer-vertical",1,"icon-20","cursor-pointer"],[1,"m-r-10","p-t-12","m-t-24",3,"innerHTML"],["mat-mini-fab","","color","primary m-t-24",1,"d-flex",3,"click"],["data-icon","solar:refresh-bold",1,"iconify","icon-20","d-flex"],[1,"table-responsive","border","rounded-4",3,"scroll"],["mat-table","",1,"w-100","table-striped","table-hover","table-default","table-orders",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 fixed-width-column sticky-col-1",3,"ngClass",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1 sticky-col-1",3,"width","ngClass",4,"matCellDef"],["matColumnDef","customerMobile"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 fixed-width-column",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",3,"width",4,"matCellDef"],["matColumnDef","customerName"],["matColumnDef","product"],["mat-cell","","class","mat-body-1 text-truncate text-dark-200",3,"width",4,"matCellDef"],["matColumnDef","note"],["mat-cell","","class","mat-body-1 text-truncate text-wrap",3,"width",4,"matCellDef"],["matColumnDef","customerAddress"],["matColumnDef","shipping"],["matColumnDef","totalAmount"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 fixed-width-column text-right",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1 text-right text-wrap text-dark-200",3,"width",4,"matCellDef"],["matColumnDef","insertedAt"],["matColumnDef","updatedAt"],["matColumnDef","status"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 fixed-width-column text-center sticky-right sticky-box-shadow-left",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1 text-center sticky-right sticky-box-shadow-left",3,"width",4,"matCellDef"],["mat-header-row","","class","table-dark",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center p-t-20 p-b-20",4,"ngIf"],[1,"m-b-10"],["aria-label","Select page",3,"page","length","pageIndex","pageSize","pageSizeOptions"],[3,"value"],[4,"ngIf"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","fixed-width-column","sticky-col-1",3,"ngClass"],["mat-cell","",1,"mat-body-1","sticky-col-1",3,"ngClass"],[1,"cursor-pointer","text-primary","text-truncate"],[3,"clickDetail","element"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","fixed-width-column"],["mat-cell","",1,"mat-body-1"],[3,"click","className"],[3,"phoneNumber"],[1,"text-dark-200","cursor-pointer",3,"click"],["mat-cell","",1,"mat-body-1","text-truncate","text-dark-200"],["class","text-error",4,"ngIf"],["class","text-primary cursor-pointer",3,"click",4,"ngIf"],["class","text-truncate cursor-pointer","style","max-width: 350px","matTooltipPosition","right",3,"matTooltip","click",4,"ngIf"],[1,"text-error"],[1,"text-primary","cursor-pointer",3,"click"],["matTooltipPosition","right",1,"text-truncate","cursor-pointer",2,"max-width","350px",3,"click","matTooltip"],["mat-cell","",1,"mat-body-1","text-truncate","text-wrap"],[1,"text-truncate","text-dark-200",2,"max-width","350px"],["class","text-dark-200 f-w-500",4,"ngIf"],["class","text-dark-200",4,"ngIf"],[1,"text-dark-200","f-w-500"],[1,"text-dark-200"],[1,"m-l-5","text-dark-200"],["name","copy",1,"icon-12","cursor-pointer",3,"click"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","fixed-width-column","text-right"],["mat-cell","",1,"mat-body-1","text-right","text-wrap","text-dark-200"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","fixed-width-column","text-center","sticky-right","sticky-box-shadow-left"],["mat-cell","",1,"mat-body-1","text-center","sticky-right","sticky-box-shadow-left"],[3,"element"],["mat-header-row","",1,"table-dark"],["mat-row",""],[1,"text-center","p-t-20","p-b-20"],[1,"text-muted"]],template:function(i,l){if(i&1){let m=I();a(0,"div",2)(1,"div",3)(2,"div",4)(3,"h4",5),p(4),d(5,"translate"),r()(),a(6,"div",6)(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10),p(11),d(12,"translate"),r()(),a(13,"li",9),v(14,"i-tabler",11),r(),a(15,"li",12)(16,"span",13),p(17),d(18,"translate"),r()()()()()()(),a(19,"mat-card",14)(20,"mat-tab-group",15),b("selectedTabChange",function(P){return f(m),h(l.onTabChange(P))}),a(21,"mat-tab"),_(22,kt,7,6,"ng-template",16)(23,Tt,1,0,null,17),r(),_(24,Vt,3,1,"mat-tab",18),r()(),_(25,xi,99,69,"ng-template",null,0,ne)}if(i&2){let m=V(26);n(4),g(" ",u(5,7,"order.common.title")," "),n(6),s("routerLink",ie(13,Pt)),n(),C(u(12,9,"labels.dashboard")),n(6),g(" ",u(18,11,"order.common.title")," "),n(3),s("selectedIndex",l.selectedTabIndex),n(3),s("ngTemplateOutlet",m),n(),s("ngForOf",l.orderStatuses)}},dependencies:[re,oe,L,le,_e,ge,fe,de,ue,Se,ye,Ce,be,ve,Pe,Me,we,Ie,ke,Oe,Te,Ee,Re,Be,De,Ne,Ve,Ae,Fe,$e,Le,He,je,ze,Ye,We,ce,Je,Ue,Ke,Xe,ut,_t,z,j,me,tt],styles:['@charset "UTF-8";  .order-tab-statues .mat-mdc-tab-labels{padding:10px 0!important}  .order-tab-statues .mdc-tab .mdc-tab__text-label{font-weight:400}  .order-tab-statues .mdc-tab.mdc-tab--active .mdc-tab__text-label{font-weight:600}  .order-tab-statues .mdc-tab.mdc-tab--active .mdc-tab__text-label .badge-custom-dark{color:#fff!important}  .table-orders thead tr{line-height:20px!important;height:40px!important}  .table-orders .sticky-col-1{position:sticky;left:0;z-index:6000}  .table-orders .sticky-col-2{position:sticky;left:187px;z-index:6000}  .table-orders .sticky-right{position:sticky;right:0;z-index:6000}  .table-orders .sticky-box-shadow-right{box-shadow:8px 0 20px -4px #00000026}  .table-orders .sticky-box-shadow-left{box-shadow:-8px 0 20px -4px #00000026}  .table-orders thead th{position:sticky;top:0;background:#f8f9fa;z-index:2000}']})};var Ci=[{path:"management",component:H,data:{title:"dashboard.home.title"},canActivate:[pt,dt]}],Y=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=E({type:t});static \u0275inj=T({imports:[W.forChild(Ci),W]})};var xt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=E({type:t});static \u0275inj=T({providers:[j],imports:[pe,he,xe,Y,Qe,lt,ft.forChild(),it,Ze,ot]})};export{xt as OrderModule};
